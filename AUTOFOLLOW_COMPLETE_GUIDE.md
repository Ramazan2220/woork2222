# Руководство по модулю автоподписок

## Обзор
Модуль автоподписок позволяет автоматизировать процесс подписки на пользователей Instagram из различных источников с поддержкой фильтров.

## Основные возможности

### 1. Множественный выбор аккаунтов
- Выбор одного или нескольких аккаунтов для выполнения задачи
- Кнопки быстрого выбора: "Выбрать все", "Снять выбор"
- Поиск аккаунтов по имени
- Визуальное отображение выбранных аккаунтов как теги (аналогично странице прогрева)
- Для каждого выбранного аккаунта создается отдельная задача

### 2. Источники подписчиков
- **Подписчики аккаунта** - подписка на подписчиков указанного аккаунта
- **Подписки аккаунта** - подписка на тех, на кого подписан указанный аккаунт
- **По хештегу** - подписка на авторов постов с указанным хештегом
- **По геолокации** - подписка на авторов постов из указанной локации
- **Лайкнувшие пост** - подписка на тех, кто лайкнул указанный пост
- **Комментаторы поста** - подписка на тех, кто оставил комментарии к посту

### 3. Фильтры аудитории
- **Пропускать закрытые аккаунты** - не подписываться на приватные профили
- **Пропускать без аватара** - пропускать аккаунты без фото профиля
- **Только бизнес-аккаунты** - подписываться только на бизнес-профили
- **Минимум подписчиков** - минимальное количество подписчиков
- **Максимум подписчиков** - максимальное количество подписчиков

### 4. Настройки задачи
- **Скорость подписок** - количество подписок в час (рекомендуется 10-30)
- **Общий лимит подписок** - задача остановится после достижения лимита

## Как использовать

### Создание задачи автоподписки

1. **Откройте страницу "Автоподписки"** в веб-интерфейсе

2. **Нажмите кнопку "Создать задачу"**

3. **Заполните форму:**
   - **Название задачи** - любое понятное название
   - **Выбор аккаунтов**:
     - Нажмите "Выбрать аккаунты"
     - Отметьте нужные аккаунты галочками
     - Или используйте "Выбрать все" для выбора всех активных
   - **Источник подписчиков**:
     - Выберите тип источника из списка
     - Укажите значение (username, hashtag, URL поста или название локации)
   - **Настройки скорости**:
     - Скорость подписок в час (10-30 для новых аккаунтов)
     - Общий лимит подписок
   - **Фильтры** - отметьте нужные фильтры

4. **Нажмите "Создать задачу"**

### Управление задачами

- **Пауза** - временно приостановить выполнение задачи
- **Возобновить** - продолжить выполнение приостановленной задачи
- **Удалить** - полностью удалить задачу

### Статистика

В верхней части страницы отображается:
- **Активные задачи** - количество выполняющихся задач
- **Подписок сегодня** - общее количество подписок за день
- **Всего подписок** - общее количество выполненных подписок
- **Средняя скорость** - количество подписок за последний час

## Примеры использования

### 1. Подписка на подписчиков конкурента
- Выберите несколько своих аккаунтов
- Источник: "Подписчики аккаунта"
- Значение: @competitor_account
- Фильтры: мин. 100 подписчиков, макс. 5000 подписчиков
- Скорость: 20 подписок/час

### 2. Подписка на активную аудиторию по хештегу
- Выберите все активные аккаунты кнопкой "Выбрать все"
- Источник: "По хештегу"
- Значение: #fitness
- Фильтры: пропускать закрытые, только с аватаром

### 3. Подписка на лайкнувших популярный пост
- Выберите один или несколько аккаунтов
- Источник: "Лайкнувшие пост"
- Значение: https://instagram.com/p/ABC123/
- Скорость: 15 подписок/час

## Безопасность

- Рекомендуемая скорость: 10-30 подписок в час
- Не превышайте 200 подписок в день для новых аккаунтов
- Используйте случайные задержки между действиями (встроено автоматически)
- Каждый аккаунт работает независимо со своей скоростью
- Система автоматически предотвращает повторные подписки на одного пользователя

## Технические детали

### База данных
- `follow_tasks` - хранит информацию о задачах
- `follow_history` - история всех подписок для предотвращения дублирования

### API endpoints
- `GET /api/follow/tasks` - список всех задач
- `POST /api/follow/tasks` - создание новой задачи
- `PUT /api/follow/tasks/{id}` - пауза/возобновление задачи
- `DELETE /api/follow/tasks/{id}` - удаление задачи
- `GET /api/follow/stats` - статистика автоподписок

### Файлы модуля
- `web-dashboard/autofollow.html` - страница интерфейса
- `web-dashboard/js/autofollow.js` - клиентская логика
- `utils/follow_manager.py` - основная логика выполнения
- `utils/async_follow_queue.py` - асинхронная очередь задач
- `database/models.py` - модели FollowTask и FollowHistory 