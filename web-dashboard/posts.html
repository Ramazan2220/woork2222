<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Публикации - Instagram Automation</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    <link rel="stylesheet" href="css/custom.css?v=2024.12.17">
    <link rel="stylesheet" href="css/mobile.css?v=2024.12.17">
    <style>
        /* Критичные мобильные стили для принудительного применения */
        @media (max-width: 768px) {
            /* 1. Кнопка закрытия - центрирование */
            .modal-close-btn {
                position: absolute !important;
                top: 12px !important;
                right: 12px !important;
                width: 36px !important;
                height: 36px !important;
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                border-radius: 6px !important;
                background: rgba(71, 85, 105, 0.8) !important;
                border: none !important;
                z-index: 20 !important;
            }
            
            .modal-close-btn i {
                width: 18px !important;
                height: 18px !important;
                color: white !important;
            }
            
            /* 2. Типы постов - вертикальная сетка */
            #publish-modal .grid.grid-cols-3 {
                grid-template-columns: 1fr !important;
                gap: 0.75rem !important;
            }
            
            .post-type-card {
                padding: 1rem !important;
                display: flex !important;
                flex-direction: row !important;
                align-items: center !important;
                gap: 1rem !important;
                text-align: left !important;
            }
            
            .post-type-card i {
                width: 2rem !important;
                height: 2rem !important;
                margin-bottom: 0 !important;
                flex-shrink: 0 !important;
            }
            
            .post-type-card span {
                font-size: 0.875rem !important;
                line-height: 1.25 !important;
                text-align: left !important;
                flex: 1 !important;
            }
            
            /* 3. Селект аккаунтов - правильное отображение */
            #post-accounts {
                height: 120px !important;
                min-height: 120px !important;
                overflow-y: auto !important;
                appearance: none !important;
                -webkit-appearance: none !important;
                -moz-appearance: none !important;
                background-color: rgb(51, 65, 85) !important;
                border: 1px solid rgb(71, 85, 105) !important;
                color: white !important;
                font-size: 0.875rem !important;
                padding: 12px !important;
                border-radius: 6px !important;
                background-image: none !important;
            }
            
            #post-accounts option {
                background-color: rgb(51, 65, 85) !important;
                color: white !important;
                padding: 8px !important;
            }
            
            #post-accounts option:selected {
                background-color: rgb(37, 99, 235) !important;
                color: white !important;
            }
        }
        
        @media (max-width: 375px) {
            .modal-close-btn {
                width: 32px !important;
                height: 32px !important;
                top: 8px !important;
                right: 8px !important;
            }
            
            .modal-close-btn i {
                width: 16px !important;
                height: 16px !important;
            }
            
            .post-type-card {
                padding: 0.75rem !important;
                gap: 0.75rem !important;
            }
            
            .post-type-card i {
                width: 1.5rem !important;
                height: 1.5rem !important;
            }
            
            .post-type-card span {
                font-size: 0.8125rem !important;
            }
        }
    </style>
</head>
<body class="bg-slate-900 text-white min-h-screen">
    <div class="flex min-h-screen">
        <!-- Sidebar Navigation -->
        <div class="w-64 border-r border-slate-800 flex flex-col">
            <!-- Header -->
            <div class="p-4 border-b border-slate-800">
                <div class="flex items-center gap-2">
                    <div class="w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-500 rounded-md flex items-center justify-center">
                        <span class="font-bold text-white">IA</span>
                    </div>
                    <h1 class="text-xl font-bold bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                        InstaAutomation
                    </h1>
                </div>
            </div>

            <!-- Navigation Menu -->
            <div class="flex-1 overflow-y-auto py-4 px-3">
                <nav class="space-y-1">
                    <a href="index.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="home" class="h-5 w-5"></i>
                        <span>Дашборд</span>
                    </a>
                    <a href="accounts.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="users" class="h-5 w-5"></i>
                        <span>Аккаунты</span>
                    </a>
                    <a href="proxy.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="globe" class="h-5 w-5"></i>
                        <span>Прокси</span>
                    </a>
                    <a href="posts.html" class="flex items-center gap-3 px-3 py-2 rounded-md bg-blue-600 text-white">
                        <i data-lucide="upload" class="h-5 w-5"></i>
                        <span>Публикации</span>
                    </a>
                    <a href="profile.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="settings" class="h-5 w-5"></i>
                        <span>Стилизация</span>
                    </a>
                    <a href="warmup.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="activity" class="h-5 w-5"></i>
                        <span>Прогрев</span>
                    </a>
                    <a href="autofollow.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="user-plus" class="h-5 w-5"></i>
                        <span>Автоподписки</span>
                    </a>
                    
                    <a href="validation.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="check-circle" class="h-5 w-5"></i>
                        <span>Валидация</span>
                    </a><a href="comments.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="message-circle" class="h-5 w-5"></i>
                        <span>Комментер</span>
                    </a>
                    <a href="masslooking.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="eye" class="h-5 w-5"></i>
                        <span>Масслукинг</span>
                    </a>
                    <a href="massdm.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="send" class="h-5 w-5"></i>
                        <span>Рассылка</span>
                    </a>
                    <a href="analytics.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="bar-chart-3" class="h-5 w-5"></i>
                        <span>Аналитика</span>
                    </a>
                    <a href="ai.html" class="flex items-center gap-3 px-3 py-2 rounded-md text-slate-300 hover:bg-slate-800 hover:text-white transition-colors">
                        <i data-lucide="bot" class="h-5 w-5"></i>
                        <span>ИИ Ассистент</span>
                    </a>
                </nav>
            </div>

            <!-- User Profile -->
            <div class="p-4 border-t border-slate-800">
                <div class="flex items-center gap-3">
                    <div class="w-10 h-10 rounded-full bg-gradient-to-r from-blue-500 to-purple-500 flex items-center justify-center">
                        <span class="font-bold text-white">АП</span>
                    </div>
                    <div>
                        <p class="text-sm font-medium text-white">Администратор</p>
                        <p class="text-xs text-slate-400">admin@example.com</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Main Content -->
        <div class="flex-1 p-8 overflow-y-auto">
            <!-- Page Header -->
            <div class="flex justify-between items-center mb-6 posts-header">
                <div>
                    <h1 class="text-3xl font-bold text-white mb-2 bg-gradient-to-r from-blue-400 to-purple-400 bg-clip-text text-transparent">
                        Публикации
                    </h1>
                    <p class="text-lg text-slate-300">Управление контентом и публикации</p>
                </div>
                <div class="posts-buttons">
                    <button id="publish-button" class="flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white rounded-lg transition-all transform hover:scale-105 shadow-lg">
                        <i data-lucide="plus" class="h-5 w-5"></i>
                        Публикация
                    </button>
                </div>
            </div>

            <!-- Tabs -->
            <div class="mb-6">
                <div class="flex space-x-1 bg-slate-800 p-1 rounded-lg">
                    <button class="flex-1 py-2 px-4 text-sm font-medium rounded-md bg-blue-600 text-white" onclick="switchTab('all')">
                        Все посты (<span id="all-count">0</span>)
                    </button>
                    <button class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-slate-400 hover:text-white transition-colors" onclick="switchTab('scheduled')">
                        Запланированные (<span id="scheduled-count">0</span>)
                    </button>
                    <button class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-slate-400 hover:text-white transition-colors" onclick="switchTab('published')">
                        Опубликованные (<span id="published-count">0</span>)
                    </button>
                    <button class="flex-1 py-2 px-4 text-sm font-medium rounded-md text-slate-400 hover:text-white transition-colors" onclick="switchTab('failed')">
                        Ошибки (<span id="failed-count">0</span>)
                    </button>
                </div>
            </div>

            <!-- Search and Filters -->
            <div class="flex gap-4 mb-6">
                <div class="flex-1 relative">
                    <i data-lucide="search" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"></i>
                    <input 
                        type="text" 
                        placeholder="Поиск по тексту или тегам..." 
                        class="w-full pl-10 pr-4 py-2 bg-slate-800 border border-slate-700 rounded-md text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                        id="search-input"
                    >
                </div>
                <button class="border border-slate-600 text-slate-300 hover:bg-slate-800 px-4 py-2 rounded-md transition-colors">
                    <i data-lucide="filter" class="h-4 w-4 mr-2 inline"></i>
                    Фильтры
                </button>
            </div>

            <!-- Posts List -->
            <div class="space-y-3" id="posts-grid">
                <!-- Posts will be loaded here -->
            </div>
        </div>
    </div>

    <!-- Publish Modal -->
    <div id="publish-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-slate-800 rounded-lg p-6 w-full max-w-3xl max-h-[90vh] overflow-y-auto relative">
            <!-- Close button -->
            <button 
                type="button" 
                onclick="closePublishModal()" 
                class="modal-close-btn"
                aria-label="Закрыть"
            >
                <i data-lucide="x" class="h-5 w-5"></i>
            </button>
            
            <h3 class="text-2xl font-bold text-white mb-6 flex items-center gap-2 pr-12">
                <i data-lucide="upload" class="h-6 w-6"></i>
                Публикация контента
            </h3>
            
            <form onsubmit="createPost(event)">
                <div class="space-y-6">
                    <!-- 1. Тип публикации -->
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-3">Тип публикации</label>
                        <div class="grid grid-cols-2 md:grid-cols-4 gap-3">
                            <label class="relative cursor-pointer">
                                <input type="radio" name="post-type" value="feed" class="sr-only" checked onchange="togglePostType()">
                                <div class="post-type-card bg-slate-700 border-2 border-slate-600 rounded-lg p-4 text-center hover:border-blue-500 transition-colors">
                                    <i data-lucide="image" class="h-8 w-8 mx-auto mb-2 text-blue-400"></i>
                                    <span class="text-white font-medium">Публикация в ленту</span>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="post-type" value="carousel" class="sr-only" onchange="togglePostType()">
                                <div class="post-type-card bg-slate-700 border-2 border-slate-600 rounded-lg p-4 text-center hover:border-orange-500 transition-colors">
                                    <i data-lucide="layers" class="h-8 w-8 mx-auto mb-2 text-orange-400"></i>
                                    <span class="text-white font-medium">Карусель</span>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="post-type" value="reels" class="sr-only" onchange="togglePostType()">
                                <div class="post-type-card bg-slate-700 border-2 border-slate-600 rounded-lg p-4 text-center hover:border-purple-500 transition-colors">
                                    <i data-lucide="video" class="h-8 w-8 mx-auto mb-2 text-purple-400"></i>
                                    <span class="text-white font-medium">Reels</span>
                                </div>
                            </label>
                            <label class="relative cursor-pointer">
                                <input type="radio" name="post-type" value="story" class="sr-only" onchange="togglePostType()">
                                <div class="post-type-card bg-slate-700 border-2 border-slate-600 rounded-lg p-4 text-center hover:border-green-500 transition-colors">
                                    <i data-lucide="clock" class="h-8 w-8 mx-auto mb-2 text-green-400"></i>
                                    <span class="text-white font-medium">История</span>
                                </div>
                            </label>
                        </div>
                    </div>

                    <!-- 2. Контент -->
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-2">Контент</label>
                        <div class="border-2 border-dashed border-slate-600 rounded-lg p-6 text-center hover:border-blue-500 transition-colors cursor-pointer" id="content-upload-area">
                            <i data-lucide="upload" class="h-12 w-12 text-slate-400 mx-auto mb-2"></i>
                            <p class="text-slate-400 mb-1">Перетащите файл или нажмите для выбора</p>
                            <p class="text-xs text-slate-500" id="upload-hint">Изображения: JPG, PNG до 10MB</p>
                            <input type="file" id="post-content" accept="image/*,video/*" class="hidden">
                        </div>
                        <div id="content-preview" class="mt-4 hidden">
                            <img id="preview-content" class="w-full max-w-xs rounded-lg mx-auto" alt="Preview">
                        </div>
                        <div id="carousel-preview" class="mt-4 hidden">
                            <p class="text-sm text-slate-300 mb-2">Выбранные файлы для карусели:</p>
                            <div id="carousel-files-list" class="grid grid-cols-2 md:grid-cols-3 gap-2"></div>
                        </div>
                    </div>
                    
                    <!-- 3. Описание (скрываем для историй) -->
                    <div id="caption-section">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Описание</label>
                        <textarea 
                            id="post-caption" 
                            rows="4" 
                            class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="Введите описание поста..."
                        ></textarea>
                        <p class="text-xs text-slate-500 mt-1">Максимум 2200 символов</p>
                    </div>

                    <!-- 4. Хештеги (только для ленты и reels) -->
                    <div id="hashtags-section">
                        <label class="block text-sm font-medium text-slate-300 mb-2">Хештеги</label>
                        <textarea 
                            id="post-hashtags" 
                            rows="3" 
                            class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                            placeholder="#хештег1 #хештег2 #хештег3..."
                        ></textarea>
                        <p class="text-xs text-slate-500 mt-1">Добавьте хештеги через пробел или с новой строки</p>
                    </div>

                    <!-- 5. Настройки историй (только для историй) -->
                    <div id="story-settings-section" class="hidden">
                        <label class="block text-sm font-medium text-slate-300 mb-3">Настройки истории</label>
                        <div class="space-y-4">
                            <!-- Ссылка (Swipe Up) -->
                            <div class="p-4 bg-blue-900/20 border border-blue-600/30 rounded-lg">
                                <label class="block text-sm font-medium text-slate-300 mb-2">
                                    <i data-lucide="link" class="h-4 w-4 inline mr-1"></i>
                                    Ссылка (Swipe Up)
                                </label>
                                <input 
                                    type="url" 
                                    id="story-link"
                                    class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="https://example.com"
                                >
                                <p class="text-xs text-blue-400 mt-1">
                                    <i data-lucide="info" class="h-3 w-3 inline mr-1"></i>
                                    Работает для аккаунтов с 10k+ подписчиков или верифицированных
                                </p>
                            </div>
                            
                            <!-- Предупреждение об ограничениях -->
                            <div class="p-3 bg-yellow-900/20 border border-yellow-600/30 rounded-lg">
                                <p class="text-xs text-yellow-400">
                                    <i data-lucide="alert-triangle" class="h-3 w-3 inline mr-1"></i>
                                    <strong>Примечание:</strong> Добавление текста, местоположения и упоминаний на истории не поддерживается через API. 
                                    Используйте графический редактор для добавления этих элементов перед загрузкой.
                                </p>
                            </div>
                        </div>
                    </div>

                    <!-- 6. Дата публикации -->
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-3">Время публикации</label>
                        <div class="space-y-3">
                            <label class="radio-option">
                                <input type="radio" name="publish-time" value="now" checked onchange="toggleScheduling()">
                                <div class="radio-custom"></div>
                                <div class="radio-content">
                                    <span class="radio-title">Опубликовать сейчас</span>
                                    <span class="radio-description">Пост будет опубликован немедленно после создания</span>
                                </div>
                            </label>
                            <label class="radio-option">
                                <input type="radio" name="publish-time" value="scheduled" onchange="toggleScheduling()">
                                <div class="radio-custom"></div>
                                <div class="radio-content">
                                    <span class="radio-title">Запланировать на дату</span>
                                    <span class="radio-description">Выберите конкретное время для публикации</span>
                                </div>
                            </label>
                            <div id="schedule-section" class="hidden">
                                <input 
                                    type="datetime-local" 
                                    id="post-date"
                                    class="w-full"
                                >
                            </div>
                        </div>
                    </div>

                    <!-- 7. Настройки публикации -->
                    <div>
                        <label class="block text-sm font-medium text-slate-300 mb-3">Настройки публикации</label>
                        <div class="space-y-3">
                            <label class="checkbox-option">
                                <input type="checkbox" id="uniquify-content">
                                <div class="checkbox-custom"></div>
                                <div class="checkbox-content">
                                    <span class="checkbox-title">Уникализировать контент</span>
                                    <span class="checkbox-description">Применить небольшие изменения к изображению для каждого аккаунта</span>
                                </div>
                            </label>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">Количество одновременных потоков</label>
                                <div class="flex items-center gap-4">
                                    <input 
                                        type="range" 
                                        id="concurrent-threads" 
                                        min="1" 
                                        max="10" 
                                        value="3" 
                                        class="flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        oninput="updateThreadsLabel()"
                                    >
                                    <span id="threads-label" class="text-white font-medium w-16 text-center">3 потока</span>
                                </div>
                                <p class="text-xs text-slate-500 mt-1">Рекомендуется 1-3 потока для безопасности. Больше потоков = быстрее, но выше риск блокировки.</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-2">Задержка между публикациями (секунды)</label>
                                <div class="flex items-center gap-4">
                                    <input 
                                        type="range" 
                                        id="publish-delay" 
                                        min="10" 
                                        max="300" 
                                        value="60" 
                                        class="flex-1 h-2 bg-slate-700 rounded-lg appearance-none cursor-pointer"
                                        oninput="updateDelayLabel()"
                                    >
                                    <span id="delay-label" class="text-white font-medium w-20 text-center">60 сек</span>
                                </div>
                                <p class="text-xs text-slate-500 mt-1">Случайная задержка от указанного времени до +50% для имитации человеческого поведения</p>
                            </div>
                        </div>
                    </div>

                    <!-- 8. Выбор аккаунтов -->
                    <div>
                        <div class="flex items-center justify-between mb-3">
                            <label class="text-sm font-medium text-slate-300">Аккаунты для публикации</label>
                            <label class="checkbox-option small-padding !bg-transparent !border-slate-600">
                                <input type="checkbox" id="publish-all-accounts" onchange="toggleAllAccounts()">
                                <div class="checkbox-custom"></div>
                                <div class="checkbox-content">
                                    <span class="checkbox-title small-text">Опубликовать на всех аккаунтах</span>
                                </div>
                            </label>
                        </div>
                        
                        <div id="account-selection-section">
                            <div class="mb-3">
                                <div id="accounts-list" class="bg-slate-700 border border-slate-600 rounded-md p-3 max-h-48 overflow-y-auto">
                                    <!-- Will be populated with account checkboxes -->
                                </div>
                                <p class="text-xs text-slate-500 mt-1">Выберите нужные аккаунты</p>
                            </div>
                            
                            <div>
                                <label class="block text-sm font-medium text-slate-300 mb-1">Или введите username'ы через запятую</label>
                                <input 
                                    type="text" 
                                    id="manual-accounts"
                                    class="w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-white placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"
                                    placeholder="username1, username2, username3..."
                                >
                            </div>
                            
                            <!-- Selected accounts display -->
                            <div id="selected-accounts-display" class="mt-3 hidden">
                                <label class="block text-sm font-medium text-slate-300 mb-2">Выбранные аккаунты:</label>
                                <div id="selected-accounts-list" class="flex flex-wrap gap-2"></div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="flex gap-3 mt-8">
                    <button type="submit" class="flex-1 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white py-3 px-6 rounded-lg transition-all transform hover:scale-105 font-medium">
                        <i data-lucide="send" class="h-5 w-5 mr-2 inline"></i>
                        Опубликовать
                    </button>
                    <button type="button" onclick="closePublishModal()" class="flex-1 bg-slate-600 hover:bg-slate-700 text-white py-3 px-6 rounded-lg transition-colors font-medium">
                        Отмена
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script src="js/api.js"></script>
    <script src="js/posts.js"></script>
    <script src="js/mobile.js"></script>
    <script>
        // Принудительное применение мобильных стилей
        function applyMobileStyles() {
            if (window.innerWidth <= 768) {
                console.log('Applying mobile styles...');
                
                // 1. Исправление кнопки закрытия
                const closeBtn = document.querySelector('.modal-close-btn');
                if (closeBtn) {
                    closeBtn.style.cssText = `
                        position: absolute !important;
                        top: 12px !important;
                        right: 12px !important;
                        width: 36px !important;
                        height: 36px !important;
                        display: flex !important;
                        align-items: center !important;
                        justify-content: center !important;
                        border-radius: 6px !important;
                        background: rgba(71, 85, 105, 0.8) !important;
                        border: none !important;
                        z-index: 20 !important;
                    `;
                }
                
                // 2. Исправление сетки типов постов
                const postTypeGrid = document.querySelector('#publish-modal .grid.grid-cols-2.md\\:grid-cols-4');
                if (postTypeGrid) {
                    postTypeGrid.style.cssText = `
                        grid-template-columns: 1fr !important;
                        gap: 0.75rem !important;
                    `;
                }
                
                // 3. Исправление карточек типов постов
                const postTypeCards = document.querySelectorAll('.post-type-card');
                postTypeCards.forEach(card => {
                    card.style.cssText = `
                        padding: 1rem !important;
                        display: flex !important;
                        flex-direction: row !important;
                        align-items: center !important;
                        gap: 1rem !important;
                        text-align: left !important;
                    `;
                    
                    const icon = card.querySelector('i');
                    if (icon) {
                        icon.style.cssText = `
                            width: 2rem !important;
                            height: 2rem !important;
                            margin-bottom: 0 !important;
                            flex-shrink: 0 !important;
                        `;
                    }
                    
                    const span = card.querySelector('span');
                    if (span) {
                        span.style.cssText = `
                            font-size: 0.875rem !important;
                            line-height: 1.25 !important;
                            text-align: left !important;
                            flex: 1 !important;
                        `;
                    }
                });
                
                // 4. Исправление селекта аккаунтов
                const accountsSelect = document.getElementById('post-accounts');
                if (accountsSelect) {
                    accountsSelect.style.cssText = `
                        height: 120px !important;
                        min-height: 120px !important;
                        overflow-y: auto !important;
                        appearance: none !important;
                        -webkit-appearance: none !important;
                        -moz-appearance: none !important;
                        background-color: rgb(51, 65, 85) !important;
                        border: 1px solid rgb(71, 85, 105) !important;
                        color: white !important;
                        font-size: 0.875rem !important;
                        padding: 12px !important;
                        border-radius: 6px !important;
                        background-image: none !important;
                    `;
                }
                
                console.log('Mobile styles applied!');
            }
        }
        
        // Применяем стили при загрузке страницы
        document.addEventListener('DOMContentLoaded', () => {
            setTimeout(applyMobileStyles, 100);
        });
        
        // Применяем стили при открытии модала
        document.addEventListener('click', (e) => {
            if (e.target.id === 'publish-button' || e.target.closest('#publish-button')) {
                setTimeout(applyMobileStyles, 200);
            }
        });
        
        // Применяем стили при изменении размера окна
        window.addEventListener('resize', applyMobileStyles);
        
        lucide.createIcons();
    </script>
</body>
</html> 