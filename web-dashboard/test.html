<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Тест кнопки публикации</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #1e293b;
            color: white;
        }
        
        .test-button {
            padding: 12px 24px;
            background: linear-gradient(to right, #2563eb, #9333ea);
            color: white;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            
            /* Mobile touch optimizations */
            touch-action: manipulation;
            -webkit-tap-highlight-color: rgba(37, 99, 235, 0.3);
            user-select: none;
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            
            /* Minimum touch target */
            min-height: 44px;
            min-width: 44px;
        }
        
        .test-button:active {
            transform: scale(0.98);
            opacity: 0.9;
        }
        
        .log {
            background: #374151;
            padding: 10px;
            border-radius: 4px;
            margin-top: 20px;
            font-family: monospace;
            font-size: 14px;
            max-height: 300px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <h1>Тест кнопки публикации</h1>
    
    <p>Нажмите на кнопки ниже, чтобы проверить их работу:</p>
    
    <button id="test-button-1" class="test-button">
        ➕ Тест кнопка 1 (touch events)
    </button>
    
    <button id="test-button-2" class="test-button">
        ➕ Тест кнопка 2 (click event)
    </button>
    
    <button id="test-button-3" class="test-button">
        ➕ Тест кнопка 3 (pointer events)
    </button>
    
    <div id="log" class="log">
        <div>Лог событий:</div>
    </div>
    
    <script>
        const log = document.getElementById('log');
        
        function addLog(message) {
            const div = document.createElement('div');
            div.textContent = `${new Date().toLocaleTimeString()}: ${message}`;
            log.appendChild(div);
            log.scrollTop = log.scrollHeight;
        }
        
        // Кнопка 1 - с touch events
        const button1 = document.getElementById('test-button-1');
        button1.addEventListener('touchstart', function(e) {
            addLog('Button 1: touchstart');
            e.preventDefault();
        }, { passive: false });
        
        button1.addEventListener('touchend', function(e) {
            addLog('Button 1: touchend - SUCCESS!');
            e.preventDefault();
        }, { passive: false });
        
        button1.addEventListener('click', function(e) {
            addLog('Button 1: click');
        });
        
        // Кнопка 2 - только click
        const button2 = document.getElementById('test-button-2');
        button2.addEventListener('click', function(e) {
            addLog('Button 2: click - SUCCESS!');
        });
        
        // Кнопка 3 - pointer events
        const button3 = document.getElementById('test-button-3');
        button3.addEventListener('pointerdown', function(e) {
            addLog(`Button 3: pointerdown (${e.pointerType})`);
        });
        
        button3.addEventListener('pointerup', function(e) {
            addLog(`Button 3: pointerup (${e.pointerType}) - SUCCESS!`);
        });
        
        button3.addEventListener('click', function(e) {
            addLog('Button 3: click');
        });
        
        // Информация о устройстве
        addLog(`Touch support: ${'ontouchstart' in window}`);
        addLog(`Pointer support: ${'onpointerdown' in window}`);
        addLog(`Device pixel ratio: ${window.devicePixelRatio}`);
    </script>
</body>
</html> 